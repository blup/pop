((function(){(function(a){var b;return b=function(){function b(b,c,d){var e;this.enabled=!0,e=this,this.el=b,this.all=c,this.options=a.extend({},this.defaults,d),this.$content=this.content(),this.$container=this.container(),this.dimContent=this.$content.offset(),this.dimContainer=this.$container.offset(),this.options.absolute&&this.$content.remove(),this.options.trigger==="hover"?this.$container.hover({"in":this.options["in"],out:this.options.out,other:this.content}).on("hover:in",function(a){return e.toggle(a)}).on("hover:out",function(a){return e.toggle(a)}):this.$container.on("click",function(a){return e.toggle(a)}),this.options.persistant&&this.el.children().on("click",function(a){return e.cancel(a)}),this.options.position=this.options.position.split("-")}return b.prototype.defaults={cache:!0,trigger:"click",persistant:!1,position:"bottom",toggle:"open",container:!1,content:!1,template:!1,"in":500,out:500,absolute:!1},b.prototype.getPosition=function(){var b,c,d,e,f,g,h,i,j;if(this.pos&&this.options.cache)return this.pos;b=a(document),c=a(window),g=this.options.position[0],d=this.options.position[1]!=null?this.options.position[1]:"top",this.dimContainer=this.$container.offset(),f={},f.top=this.dimContainer.top-b.scrollTop(),f.bottom=c.height()-f.top-this.$container.height(),f.left=this.dimContainer.left-b.scrollLeft(),f.right=c.width()-f.left-this.$container.width(),g==="auto"&&(g="right"),g==="right"&&f.right-this.dimContent.width<0?h="left":g==="left"&&f.left-this.dimContent.width<0?h="right":g==="top"&&f.top-this.dimContent.height<0?h="bottom":g==="bottom"&&f.top-this.dimContent.height<0?h="top":h=g,i={},e=this.options.absolute?this.dimContainer.left:0,j=this.options.absolute?this.dimContainer.top:0;if(h==="top"||h==="bottom")d==="left"?i.left=e:d==="center"?i.left=e+(this.dimContainer.width/2-this.dimContent.width/2):d==="right"&&(i.left=e+this.dimContainer.width-this.dimContent.width),h==="top"?i.top=j-this.dimContent.height:i.top=j+this.dimContainer.height;else if(h==="left"||h==="right")d==="top"?i.top=j:d==="center"?i.top=j+(this.dimContainer.height/2-this.dimContent.height/2):d==="bottom"&&(i.top=j+this.dimContainer.height-this.dimContent.height),h==="left"?i.left=e-this.dimContent.width:i.left=e+this.dimContainer.width;return this.pos=i},b.prototype.container=function(){return this.$container?this.$container:this.options.container?this.$container=this.el.parents(this.options.container):this.$container=this.el.parent()},b.prototype.content=function(){return this.$content?this.$content:this.options.template?this.$content=a(this.options.template):this.options.content&&this.options.content===!0?this.$content=this.el:this.options.content?this.$content=this.el.children(this.options.content):this.$content=this.el.next()},b.prototype.toggle=function(a){var b;return a.stopPropagation(),b=this.$container.hasClass(this.options.toggle),this.clearAll(),b?this.hide():this.show(),this.$container},b.prototype.show=function(){var b;if(this.enabled)return b=this.getPosition(),b.opacity=1,this.$content.css(b),this.options.absolute&&a("body").append(this.$content),this.$container.addClass(this.options.toggle)},b.prototype.hide=function(){this.$container.removeClass(this.options.toggle),this.$content.css({opacity:0});if(this.options.absolute)return this.$content.remove()},b.prototype.clearAll=function(){var b;return b=this.options.container?a(this.options.container):this.all.parent(),b.removeClass(this.options.toggle)},b.prototype.enable=function(){return this.enabled=!0},b.prototype.disable=function(){return this.enabled=!1},b.prototype.toggleEnabled=function(){return this.enabled=!this.enabled},b.prototype.cancel=function(a){return a.stopPropagation()},b}(),a.fn.pop=function(c){var d;return c==null&&(c={}),d=this,this.each(function(){var e,f;f=a(this),e=f.data("pop"),e||f.data("pop",e=new b(f,d,c));if(typeof c=="string")return e[c]()})},a.fn.popRight=function(c){var d;return c==null&&(c={}),d=this,this.each(function(){var e,f;f=a(this),e=f.data("popRight"),e||(c.toggle="active",c.position="right-top",c.absolute=!1,c.trigger="hover",c.cache=!1,c.content=!0,c["in"]=1e3,c.out=400,f.data("popRight",e=new b(f,d,c)));if(typeof c=="string")return e[c]()})},a.fn.popDown=function(c){var d;return c==null&&(c={}),d=this,this.each(function(){var e,f;f=a(this),e=f.data("popDown"),e||(c.persistant=f.data("persistant"),c.container=f.data("target"),f.data("popDown",e=new b(f,d,c)));if(typeof option=="string")return e[c]()})},a.fn.popTip=function(c){var d;return c==null&&(c={}),d=this,this.each(function(){var e,f;f=a(this),e=f.data("popTip"),e||(c.container=f.data("target"),c.position="top",c.template='<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',f.data("popTip",e=new b(f,d,c)));if(typeof option=="string")return e[c]()})}})(window.Zepto||window.jQuery)})).call(this);